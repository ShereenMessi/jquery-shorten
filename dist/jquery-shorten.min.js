/*! jQuery shorten - v0.2.1 - 2014-09-04
* https://github.com/amazingSurge/jquery-shorten
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c){"use strict";var d=function(a,b){this.element=a,this.$element=c(a),this.text=this.$element.text(),this.expanded=!1;var e=[];c.each(this.$element.data(),function(a,b){var c=new RegExp("^shorten","i");c.test(a)&&(e[a.toLowerCase().replace(c,"")]=b)}),this.options=c.extend(!0,{},d.defaults,b,e),this.namespace=this.options.namespace;var f=this;c.extend(f,{init:function(){this.prepare(),f.$element.on("shorten:expand",function(){f.expanded=!0,f.$element.addClass(f.namespace+"_expand")}),f.$element.on("shorten:collapse",function(){f.expanded=!1,f.$element.removeClass(f.namespace+"_expand")}),this.toggle.bind()},prepare:function(){f.summaryText=f.text.slice(0,f.options.chars),f.detailText=f.text.slice(f.summaryText.length),f.$element.html(f.summaryText+this.ellipses.html()+'<span class="'+f.namespace+'-detail">'+f.detailText+"</span>"+this.toggle.html())},ellipses:{html:function(){return f.options.ellipses?'<span class="'+f.namespace+'-ellipses">'+f.options.ellipses+"</span>":""}},toggle:{html:function(){var a;return a=f.expanded?f.options.less:f.options.more,'<a class="'+f.namespace+'-toggle" href="#">'+a+"</a>"},bind:function(){f.$toggle=f.$element.find("."+f.namespace+"-toggle"),f.$element.on("click.shorten","."+f.namespace+"-toggle",function(){return f.expanded?(f.$element.trigger("shorten:collapse"),c(this).html(f.options.more)):(f.$element.trigger("shorten:expand"),c(this).html(f.options.less)),!1})}},needShorten:function(){return this.text.length>this.options.chars?!0:!1}}),f.needShorten()&&f.init()};d.defaults={chars:100,ellipses:"...",more:"more",less:"less",namespace:"shorten"},d.prototype={constructor:d,text:function(){return this.text},expand:function(){this.$element.trigger("shorten:expand")},collapse:function(){this.$element.trigger("shorten:collapse")},destroy:function(){this.$element.html(this.text),this.$element.data("shorten",null),this.$element.off(".shorten"),this.$element.off("shorten:expand"),this.$element.off("shorten:collapse")},update:function(a){this.text=a,this.needShorten()?this.prepare():this.$element.html(a)}},c.fn.shorten=function(a){if("string"!=typeof a)return this.each(function(){var b=c.data(this,"shorten");b||(b=new d(this,a),c.data(this,"shorten",b))});var b=a,e=arguments.length>1?Array.prototype.slice.call(arguments,1):[];if(!/^(text)$/.test(b))return this.each(function(){var a=c.data(this,"shorten");a&&"function"==typeof a[b]&&a[b].apply(a,e)});var f=this.first().data("shorten");return f&&"function"==typeof f[b]?f[b].apply(f,e):void 0}}(window,document,jQuery);